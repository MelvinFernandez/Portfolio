<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projects • Melvin Fernandez</title>
  <meta name="description" content="Project portfolio for Melvin Fernandez." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="assets/logo.png?v=3">
  <style>
    :root{
      --bg:#0b0b0c;       /* black */
      --panel:#16171a;    /* dark gray */
      --text:#e6e6e6;     /* silver */
      --muted:#9aa0a6;    /* mid gray */
      --accent:#c0c0c0;   /* silver */
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --radius-lg: 28px;
      --maxw: 1100px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 450px at 75% -10%, rgba(255,255,255,.05), transparent 60%),
        var(--bg);
      line-height:1.6; letter-spacing:.1px;
    }
    a{color:var(--accent); text-decoration:none}
    .wrap{max-width:1200px; margin:0 auto; padding:28px 20px 64px}

    /* Top bar */
    header{position:sticky; top:0; z-index:10;
      backdrop-filter:saturate(160%) blur(8px);
      background:linear-gradient(180deg, rgba(11,11,12,.92), rgba(11,11,12,.60));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 20px}
    .brand h1{font-size:18px; margin:0; font-weight:700; letter-spacing:.3px}
    .button{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; background:#1c1d21; border:1px solid rgba(255,255,255,.10); color:var(--text); font-weight:600}
    .button.ghost{background:transparent}
    .button:hover{transform:translateY(-1px)}

    /* Page title */
    h2{font-size:28px; margin:20px 0 10px}

    /* Container */
    .projects-wrap{
      max-width: 1200px;
      margin-inline: auto;
      padding: 16px;
    }

    /* Responsive grid that fills rows without leftover gaps */
    .projects-grid{
      display: grid;
      gap: 24px;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      align-items: stretch;               /* cards same height */
    }

    /* Legacy grid support */
    .grid{display:grid; gap:24px; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); align-items: stretch}
    @media (max-width: 1024px){ .grid{grid-template-columns:repeat(auto-fit, minmax(280px, 1fr))} }
    @media (max-width: 768px){ .grid{grid-template-columns:repeat(auto-fit, minmax(280px, 1fr))} }
    @media (max-width: 640px){ .grid{grid-template-columns:repeat(auto-fit, minmax(280px, 1fr))} }

    /* Project card */
    .project-card{
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 18px;
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
      cursor: pointer;
    }

    .project-card:hover,
    .project-card:focus-within{
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(0,0,0,.35);
      border-color: var(--accent);
    }

    /* Title and description */
    .project-card h3{
      margin: 0 0 6px;
      font-size: 1.05rem;
      line-height: 1.3;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      color: var(--text);
      font-weight: 600;
      max-width: 100%;
    }

    .project-card p.desc{
      margin: 0 0 12px;
      opacity: .85;
      color: #d6d6d6;
      line-height: 1.5;

      /* Clamp to 2 lines with ellipsis */
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      max-width: 100%;
    }

    /* Tag pills */
    .tags{
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: auto;     /* pins tags to the bottom so heights match */
    }

    .tag{
      padding: 6px 10px;
      border-radius: 9999px;
      font-size: .8rem;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      white-space: nowrap;
      color: var(--text);
    }

    /* Header row alignment on this page */
    .projects-header{
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin: 8px 0 20px;
    }

    /* Small screens */
    @media (max-width: 767px){
      .projects-wrap{ padding: 12px; }
      .projects-header{ flex-direction: column; align-items: flex-start; }
    }

    /* Legacy cards for compatibility */
    .item-link{display:block; width:100%; height:100%; color:inherit}
    .item{
      width:100%;
      height:100%;
      display:flex; flex-direction:column;
      padding:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border:1px solid rgba(255,255,255,.08);
      border-radius:16px;
      box-shadow:var(--shadow);
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }
    .item:hover{ transform:translateY(-4px); box-shadow:0 8px 20px rgba(0,0,0,.35); border-color:var(--accent); }
    .item h3{margin:0 0 6px; font-size:18px; font-weight:600}
    .item p{margin:0 0 16px; color:#d6d6d6; line-height:1.5}
    .pill{display:inline-block; padding:6px 12px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); font-size:12px; margin:4px 4px 0 0; color:var(--text)}
    .meta{margin-top:auto; display:flex; flex-wrap:wrap; gap:4px}

    /* Section header row */
    .section-head{display:flex; align-items:center; justify-content:space-between; margin:24px 0 16px}
    .muted{color:var(--muted)}
    /* ---------- Header fixes ---------- */
.nav{
  display:flex;
  align-items:center;
  justify-content:space-between;   /* name on left, buttons on right */
  gap:16px;
}

.brand h1{
  margin:0;
  white-space:nowrap;              /* keep name on one line */
  overflow:hidden;                 /* if too long, clip nicely */
  text-overflow:ellipsis;
  max-width:40vw;                  /* don’t let it push the buttons */
}

.actions{
  display:flex;                    /* keep buttons in a row */
  gap:12px;
  flex-wrap:nowrap;
}

.actions .button{
  display:inline-flex;             /* prevents weird wrapping */
  align-items:center;
  white-space:nowrap;
}

/* On narrow screens, allow wrapping but keep it tidy */
@media (max-width: 640px){
  .brand h1{ max-width: 55vw; }    /* a little more room for the name */
  .actions{ flex-wrap:wrap; gap:8px; justify-content:flex-end; }
}

/* ---------- Title + subtitle row ---------- */
.section-head{
  display:flex;
  align-items:baseline;            /* nice alignment with big H2 */
  gap:16px;
  flex-wrap:wrap;                  /* wrap gracefully when tight */
}

@media (max-width: 800px){
  .section-head{
    flex-direction:column;         /* stack on small screens */
    align-items:flex-start;
    gap:6px;
  }
}
@media (max-width: 480px){
  .brand h1{ font-size:16px; }
}
/* FORCE header actions to sit side-by-side */
.nav{
  display:flex !important;
  align-items:center !important;
  justify-content:space-between !important;
  gap:16px !important;
}

.actions{
  display:flex !important;
  flex-direction:row !important;
  align-items:center !important;
  justify-content:flex-end !important;
  gap:12px !important;
  flex-wrap:nowrap !important;
}

.actions .button{
  display:inline-flex !important;
  width:auto !important;
  white-space:nowrap !important;
  margin:0 !important;
}

/* Keep the name on one line without pushing buttons down */
.brand h1{
  margin:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width:40vw;
}
@media (max-width:640px){
  .brand h1{ max-width:55vw; }
}
/* --- Projects page spacing fixes --- */
header + .wrap { padding-top: 12px; }           /* was 28px */
.section-head { margin: 6px 0 12px; }           /* was 24px 0 16px */
.section-head h2 { margin: 0; line-height: 1.2; } /* kill extra top margin */
/* ===== PROJECTS HEADER FIXES (place at very bottom) ===== */

/* Keep name left, both buttons on one line to the right */
header .nav{
  display:flex !important;
  align-items:center !important;
  justify-content:space-between !important;
  gap:12px !important;
  flex-wrap:nowrap !important;
}

/* The buttons container */
header .nav .actions{
  display:flex !important;
  align-items:center !important;
  justify-content:flex-end !important;
  gap:12px !important;
  flex-wrap:nowrap !important;     /* don't wrap on desktop */
}

/* Buttons themselves */
header .nav .actions .button{
  display:inline-flex !important;
  align-items:center !important;
  padding:10px 14px !important;
  margin:0 !important;
  line-height:1 !important;
  white-space:nowrap !important;
  border:none !important;          /* remove outline on desktop */
  background:transparent !important;
}

/* Keep your name on one line; don't let it push buttons down */
header .nav .brand h1{
  margin:0 !important;
  white-space:nowrap !important;
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  max-width:40vw !important;
}

/* MOBILE: allow wraps if needed and show outlines only on phones */
@media (max-width: 720px){
  header .nav .actions{
    gap:8px !important;
    flex-wrap:wrap !important;     /* okay to wrap on small screens */
  }
  header .nav .actions .button{
    border:1px solid rgba(255,255,255,.12) !important;  /* outline only on mobile */
    background:transparent !important;
  }
  header .nav .brand h1{ max-width:55vw !important; }
}
/* ===== FLAT HEADER FIX ===== */
header .nav {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: 20px !important;
  flex-wrap: nowrap !important;   /* keep one row */
}

header .nav .brand h1 {
  margin: 0 !important;
  white-space: nowrap !important; /* name stays on one line */
}

header .nav .actions {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-end !important;
  gap: 12px !important;
  flex-wrap: nowrap !important;   /* no wrapping on desktop */
}

header .nav .actions .button {
  border: none !important;        /* flat look */
  background: transparent !important;
  padding: 10px 14px !important;
  white-space: nowrap !important;
}

/* MOBILE: allow wrapping + outline style */
@media (max-width: 720px) {
  header .nav .actions {
    flex-wrap: wrap !important;   /* okay to wrap on small screens */
    gap: 8px !important;
  }
  header .nav .actions .button {
    border: 1px solid rgba(255,255,255,.12) !important;
    background: transparent !important;
    border-radius: 12px;
  }
}
/* ===== FORCE FLAT HEADER (projects.html) ===== */
header .nav{
  display:flex !important;
  align-items:center !important;
  justify-content:space-between !important;
  gap:16px !important;
  flex-wrap:nowrap !important;           /* keep one line on desktop */
}

header .nav .brand h1{
  margin:0 !important;
  white-space:nowrap !important;
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  max-width:40vw !important;             /* don't push buttons down */
}

header .nav .actions{
  display:flex !important;
  flex-direction:row !important;
  align-items:center !important;
  justify-content:flex-end !important;
  gap:12px !important;
  flex-wrap:nowrap !important;           /* no wrapping on desktop */
  flex:0 0 auto !important;
}

header .nav .actions .button{
  display:inline-flex !important;
  align-items:center !important;
  padding:10px 14px !important;
  margin:0 !important;
  line-height:1 !important;
  white-space:nowrap !important;

  /* flat look on desktop */
  border:none !important;
  background:transparent !important;
}

/* MOBILE: allow wrap + show outlines */
@media (max-width: 720px){
  header .nav .brand h1{ max-width:55vw !important; }
  header .nav .actions{ flex-wrap:wrap !important; gap:8px !important; }
  header .nav .actions .button{
    border:1px solid rgba(255,255,255,.12) !important;
    background:transparent !important;
    border-radius:12px;
  }
}
/* ==== Projects header polish (desktop clean, mobile outlined) ==== */

/* Keep header one line, balanced */
header .nav{
  display:flex !important;
  align-items:center !important;
  justify-content:space-between !important;
  gap:16px !important;
  flex-wrap:nowrap !important;
  padding:10px 20px;              /* consistent bar height */
}

/* Name */
header .nav .brand h1{
  margin:0 !important;
  white-space:nowrap !important;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Buttons cluster */
header .nav .actions{
  margin-left:auto;               /* pushes buttons to the right */
  display:flex !important;
  align-items:center !important;
  gap:12px !important;
  flex-wrap:nowrap !important;
}

/* Buttons — desktop: flat (no outlines) */
header .nav .actions .button{
  display:inline-flex !important;
  align-items:center;
  white-space:nowrap;
  padding:10px 14px;
  border:none !important;
  background:transparent !important;
  box-shadow:none !important;
  border-radius:10px;             /* set to 0 if you want square corners */
  line-height:1;
}

/* Hover feedback on desktop */
@media (hover:hover){
  header .nav .actions .button:hover{
    background:rgba(255,255,255,.06);
  }
}

/* Mobile: allow wrap + bring back outlines for tap targets */
@media (max-width: 720px){
  header .nav .actions{
    gap:8px !important;
    flex-wrap:wrap !important;
  }
  header .nav .actions .button{
    border:1px solid rgba(255,255,255,.12) !important;
    background:transparent !important;
  }
}
/* ==== Make header always fit within the bar (no overflow) ==== */
header .nav { gap: 8px; }

header .nav,
header .nav * { min-width: 0; }           /* allow flex children to shrink */

header .brand { flex: 1 1 auto; }         /* name can take remaining space */
header .brand h1{
  max-width: 100%;                        /* don’t cap early */
  overflow: hidden;
  text-overflow: ellipsis;                /* gracefully shorten long names */
  white-space: nowrap;
}

header .actions{
  flex: 0 1 auto;                         /* buttons are allowed to shrink */
  display: flex;
  gap: 8px;
}

header .actions .button{
  padding: 8px 10px;                      /* slightly tighter so it fits */
  white-space: nowrap;
}

/* Medium screens: scale down a hair */
@media (max-width: 900px){
  header .brand h1{ font-size: 16px; }
  header .actions .button{ font-size: 14px; padding: 7px 10px; }
}

/* Very small screens: allow wrapping instead of overflow */
@media (max-width: 420px){
  header .actions{ flex-wrap: wrap; justify-content: flex-end; gap: 6px; }
}
/* ===== Header buttons: flat + white-outline hover (no jump) ===== */
header .actions .button{
  border: 1px solid transparent !important;   /* reserve space for outline */
  background: transparent !important;
  box-shadow: none !important;
  transform: none !important;                 /* kill translateY(-1px) */
  transition: background .2s ease, border-color .2s ease, color .2s ease;
}

header .actions .button:hover,
header .actions .button:focus-visible{
  border-color: rgba(255,255,255,.6) !important;  /* thin white outline */
  background: rgba(255,255,255,.06) !important;   /* subtle highlight */
  color: var(--accent-2) !important;
  transform: none !important;                      /* absolutely no motion */
}

/* Optional: slightly tighter padding so they always fit */
header .actions .button{ padding: 8px 12px !important; }

/* Mobile keeps the same look; wrapping allowed if needed */
@media (max-width: 720px){
  header .actions{ flex-wrap: wrap; gap: 8px; }
}
/* ===== FINAL DESKTOP OVERRIDE: flat + white-outline hover (no jump) ===== */
@media (min-width: 721px){
  header .nav .actions .button{
    border: 1px solid transparent !important;  /* keep layout stable */
    background: transparent !important;
    box-shadow: none !important;
    transform: none !important;
    padding: 8px 12px !important;
  }
  header .nav .actions .button:hover,
  header .nav .actions .button:focus-visible{
    border-color: rgba(255,255,255,.6) !important; /* thin white outline */
    background: rgba(255,255,255,.06) !important;  /* subtle highlight */
    color: var(--accent-2) !important;
    transform: none !important;                     /* no movement */
  }
}

/* Belt-and-suspenders: kill any global hover move */
.button:hover{ transform:none !important; }
/* --- Logo in header (projects page) --- */
.brand .logo{
  display:block;
  height:44px;     /* desktop size */
  width:auto;
  filter: drop-shadow(0 0 12px rgba(255,255,255,.35)); /* subtle glow */
}

/* Screen-reader-only helper (if not already in this file) */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

@media (max-width:720px){
  .brand .logo{ height:36px; }     /* mobile size */
}

  /* Project Overlay Styles */
  .project-overlay {
    position: fixed;
    inset: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: overlayFadeIn 0.2s ease-out;
  }

  .project-overlay.closing {
    animation: overlayFadeOut 0.2s ease-in;
  }

  @keyframes overlayFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes overlayFadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
  }

  .overlay-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(8px);
  }

  .overlay-container {
    position: relative;
    width: 100%;
    max-width: 1024px;
    max-height: 90vh;
    background: var(--panel);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    overflow: hidden;
    animation: overlaySlideIn 0.2s ease-out;
  }

  .overlay-content {
    max-width: 1024px;
    margin: 0 auto;
    padding: 24px;
    max-height: calc(90vh - 120px);
    overflow-y: auto;
    
    /* Hide scrollbar completely */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* Internet Explorer 10+ */
  }
  
  /* Hide scrollbar for WebKit browsers */
  .overlay-content::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .project-overlay.closing .overlay-container {
    animation: overlaySlideOut 0.2s ease-in;
  }

  @keyframes overlaySlideIn {
    from { transform: scale(0.95) translateY(20px); opacity: 0; }
    to { transform: scale(1) translateY(0); opacity: 1; }
  }

  @keyframes overlaySlideOut {
    from { transform: scale(1) translateY(0); opacity: 1; }
    to { transform: scale(0.95) translateY(20px); opacity: 0; }
  }

  .overlay-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 20px;
    padding: 12px 24px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 20px;
  }

  .overlay-title-section {
    flex: 1;
  }

  .overlay-title {
    font-size: 28px;
    font-weight: 700;
    margin: 0 0 2px 0 !important;
    color: var(--text);
  }

  .overlay-tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 0 !important;
  }

  /* Proper spacing for dynamically generated overlays */
  .project-overlay .overlay-title {
    margin-bottom: 5px !important;
  }
  
  .project-overlay .overlay-tags {
    margin-top: 2px !important;
  }

  .overlay-tags .tag {
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    font-size: 12px;
    color: var(--text);
  }

  .overlay-close {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text);
  }

  .overlay-close:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
    transform: scale(1.1);
  }

  .overlay-main {
    margin-bottom: 0px;
  }

  .overlay-description {
    line-height: 1.7;
    color: var(--text);
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    max-width: 100%;
  }

  .overlay-description h2 {
    font-size: 24px;
    margin: 24px 0 16px 0;
    color: var(--text);
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .overlay-description h3 {
    font-size: 20px;
    margin: 20px 0 12px 0;
    color: var(--text);
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .overlay-description p {
    margin: 0 0 16px 0;
    color: var(--text);
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  .overlay-description ul {
    margin: 0 0 16px 0;
    padding-left: 20px;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .overlay-description li {
    margin: 0 0 8px 0;
    color: var(--text);
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  .overlay-gallery {
    margin-bottom: 32px;
  }

  .overlay-gallery h3 {
    font-size: 20px;
    margin: 0 0 16px 0;
    color: var(--text);
  }

  .gallery-container {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    padding: 20px;
  }

  .overlay-links {
    margin-bottom: 32px;
  }

  .overlay-links h3 {
    font-size: 20px;
    margin: 0 0 16px 0;
    color: var(--text);
  }

  .link-buttons {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }

  .link-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    color: var(--text);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .link-button:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
  }

  .link-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .link-button.github {
    background: rgba(36, 41, 46, 0.8);
    border-color: rgba(36, 41, 46, 0.9);
  }

  .link-button.github:hover {
    background: rgba(36, 41, 46, 1);
  }

  .link-button.download {
    background: rgba(34, 197, 94, 0.1);
    border-color: rgba(34, 197, 94, 0.3);
    color: rgb(34, 197, 94);
  }

  .link-button.download:hover {
    background: rgba(34, 197, 94, 0.2);
    border-color: rgba(34, 197, 94, 0.5);
    transform: translateY(-2px);
  }

  /* Image Carousel Styles */
  .carousel-container {
    width: 100%;
  }

  .carousel-main {
    position: relative;
    margin-bottom: 20px;
  }

  .carousel-image-container {
    width: 100%;
    aspect-ratio: 16/9;
    max-height: 70vh;
    border-radius: 16px;
    overflow: hidden;
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.04), transparent);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .carousel-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  /* Image Frame Styles */
  .img-frame {
    position: relative;
    background: #0f0f10;
    border-radius: 12px;
    overflow: hidden;
    aspect-ratio: 16/9;
    max-height: 70vh;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .img-frame img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  /* Expand icon */
  .expand-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 36px;
    height: 36px;
    display: grid;
    place-items: center;
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
    border-radius: 8px;
    cursor: pointer;
    backdrop-filter: blur(6px);
    transition: all 0.2s ease;
  }

  .expand-btn:hover {
    background: rgba(0, 0, 0, 0.75);
    transform: scale(1.05);
  }

  /* When the frame is fullscreen */
  .img-frame.is-fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    border-radius: 0;
  }

  .img-frame.is-fullscreen img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    max-width: 100vw;
    max-height: 100vh;
  }

  .img-frame.is-fullscreen .expand-btn {
    display: none;
  }



  /* Optional: hide body scroll during fullscreen for nicer feel */
  .no-scroll {
    overflow: hidden;
  }

  .carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.5);
    border: none;
    border-radius: 9999px;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--text);
    transition: all 0.2s ease;
    font-size: 18px;
    font-weight: 600;
  }

  .carousel-arrow:hover {
    background: rgba(0, 0, 0, 0.6);
    transform: translateY(-50%) scale(1.05);
  }

  .carousel-arrow-prev {
    left: 16px;
  }

  .carousel-arrow-next {
    right: 16px;
  }

  .carousel-counter {
    position: absolute;
    bottom: 12px;
    right: 16px;
    background: rgba(0, 0, 0, 0.5);
    color: rgba(255, 255, 255, 0.8);
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 500;
    backdrop-filter: blur(8px);
  }

  .carousel-thumbnails {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding: 12px 0;
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
  }

  .carousel-thumbnails::-webkit-scrollbar {
    height: 4px;
  }

  .carousel-thumbnails::-webkit-scrollbar-track {
    background: transparent;
  }

  .carousel-thumbnails::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
  }

  .carousel-thumbnail {
    flex-shrink: 0;
    width: 64px;
    height: 48px;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: all 0.2s ease;
    background: rgba(0, 0, 0, 0.3);
  }

  .carousel-thumbnail:hover {
    border-color: rgba(255, 255, 255, 0.3);
    transform: scale(1.05);
  }

  .carousel-thumbnail.active {
    border-color: var(--accent);
    border-width: 2px;
  }

  .carousel-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Project Card Enhancements - for overlays only */
  .project-overlay .project-card {
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
    width: 100%;
    background: var(--panel);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-lg);
    padding: 24px;
  }

  .project-overlay .project-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35);
    border-color: var(--accent);
  }

  .project-card .item-content {
    height: 100%;
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  .item-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-height: 120px;
  }

  .project-title {
    font-size: 18px;
    margin: 0 0 12px 0;
    color: var(--text);
    font-weight: 600;
  }

  .project-summary {
    margin: 0 0 16px 0;
    color: #d6d6d6;
    line-height: 1.5;
    flex: 1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .project-overlay {
      padding: 10px;
    }

      .overlay-container {
    max-height: 95vh;
    border-radius: 12px;
  }

    .overlay-header {
      padding: 8px 12px 0;
      flex-direction: row;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
      padding-bottom: 12px;
    }

    .overlay-title-section {
      flex: 1;
      padding-right: 8px;
    }

    .overlay-title {
      font-size: 24px;
      margin: 0 0 2px 0 !important;
    }

    .overlay-tags {
      margin-top: 0;
    }

    .overlay-close {
      flex-shrink: 0;
      margin-top: 0;
    }

    .overlay-content {
      padding: 16px;
      max-height: calc(95vh - 140px);
    }

    .carousel-image-container {
      max-height: 50vh;
    }

    .carousel-arrow {
      width: 32px;
      height: 32px;
      font-size: 16px;
    }

    .link-buttons {
      flex-direction: column;
    }

    .link-button {
      justify-content: center;
    }
  }

  @media (max-width: 480px) {
    .overlay-header {
      padding: 5px 5px 0;
      gap: 8px;
      padding-bottom: 5px;
    }

    .overlay-title-section {
      padding-right: 4px;
    }

    .overlay-title {
      font-size: 20px;
      line-height: 1.2;
      margin: 0 0 2px 0 !important;
    }

    .overlay-close {
      width: 36px;
      height: 36px;
    }

    .overlay-content {
      padding: 12px;
    }

    .overlay-description {
      font-size: 14px;
      line-height: 1.6;
    }

    .overlay-description h2 {
      font-size: 18px;
      margin: 16px 0 12px 0;
    }

    .overlay-description h3 {
      font-size: 16px;
      margin: 14px 0 8px 0;
    }

    .overlay-description p,
    .overlay-description li {
      font-size: 14px;
      line-height: 1.6;
    }

    .overlay-description ul {
      padding-left: 16px;
    }

    .carousel-image-container {
      height: 150px;
    }

    .carousel-thumbnails {
      gap: 6px;
    }

    .carousel-thumbnail {
      width: 60px;
      height: 45px;
    }

    /* Ensure all text elements wrap properly on mobile */
    .project-card,
    .overlay-description,
    .overlay-content * {
      word-break: break-word;
      overflow-wrap: break-word;
      max-width: 100%;
      box-sizing: border-box;
    }

    /* Prevent horizontal scrolling on mobile */
    body {
      overflow-x: hidden;
    }

    .project-card,
    .overlay-container,
    .overlay-content {
      max-width: 100vw;
      box-sizing: border-box;
    }
  }

  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand">
        <img class="logo" src="assets/logo-mark.png" alt="MF logo" />
        <span class="sr-only">Melvin Fernandez Diaz</span>
      </div>
      <div class="actions">
        <a class="button ghost" href="index.html">← Back to Home</a>
        <a class="button ghost" href="https://github.com/MelvinFernandez" target="_blank" rel="noopener">GitHub Profile</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="section-head">
      <h2>Projects</h2>
      <span class="muted">A selection of dashboards, analysis, and tools.</span>
    </div>

    <div class="projects-grid" id="projects-grid">
      <!-- Projects will be dynamically loaded here -->
    </div>
  </section>

  <!-- Scripts -->
  <script type="module" src="./main.js?v=4"></script>
  
  <script>
    (function(){
      let currentCarousel = null;
      let currentImageIndex = 0;
      let carouselImages = [];

      function toFullscreen(frame){
        const img = frame.querySelector('img');
        const fullSrc = img.dataset.full || img.src;

        // Find the carousel container and get all images
        const carouselContainer = frame.closest('.carousel-container');
        if (carouselContainer) {
          // Get the carousel instance or images array
          const thumbnails = carouselContainer.querySelectorAll('.carousel-thumbnail img');
          if (thumbnails.length > 0) {
            carouselImages = Array.from(thumbnails).map(thumb => thumb.src);
            // Find current image index
            currentImageIndex = Array.from(thumbnails).findIndex(thumb => thumb.src === img.src);
            if (currentImageIndex === -1) currentImageIndex = 0;
          } else {
            // Fallback: single image
            carouselImages = [img.src];
            currentImageIndex = 0;
          }
        } else {
          // Single image mode
          carouselImages = [img.src];
          currentImageIndex = 0;
        }

        // swap to high-res only in fullscreen
        if (fullSrc && img.src !== fullSrc) {
          img.dataset._thumb = img.src;
          img.src = fullSrc;
        }

        frame.classList.add('is-fullscreen');
        document.body.classList.add('no-scroll');
        
        // Create fullscreen controls container
        const controlsContainer = document.createElement('div');
        controlsContainer.id = 'fullscreen-controls';
        controlsContainer.style.cssText = `
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          pointer-events: none;
          z-index: 999999;
        `;

        // Create modern minimize button
        const minimizeBtn = document.createElement('button');
        minimizeBtn.id = 'simple-minimize-btn';
        minimizeBtn.setAttribute('aria-label', 'Exit fullscreen');
        minimizeBtn.setAttribute('title', 'Exit fullscreen');
        minimizeBtn.innerHTML = `
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
            <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
          </svg>
        `;
        minimizeBtn.style.cssText = `
          position: absolute;
          top: 20px;
          right: 20px;
          width: 44px;
          height: 44px;
          background: rgba(0, 0, 0, 0.8);
          border: 1px solid rgba(255, 255, 255, 0.2);
          border-radius: 8px;
          color: #e6e6e6;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          backdrop-filter: blur(8px);
          transition: all 0.2s ease;
          pointer-events: auto;
          font-family: inherit;
        `;
        
        // Create navigation arrows (only if multiple images)
        let prevBtn, nextBtn, counter;
        if (carouselImages.length > 1) {
          prevBtn = document.createElement('button');
          prevBtn.id = 'fullscreen-prev';
          prevBtn.setAttribute('aria-label', 'Previous image');
          prevBtn.setAttribute('title', 'Previous image');
          prevBtn.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
          `;
          prevBtn.style.cssText = `
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 44px;
            height: 44px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e6e6e6;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(8px);
            transition: all 0.2s ease;
            pointer-events: auto;
            font-family: inherit;
          `;

          nextBtn = document.createElement('button');
          nextBtn.id = 'fullscreen-next';
          nextBtn.setAttribute('aria-label', 'Next image');
          nextBtn.setAttribute('title', 'Next image');
          nextBtn.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18l6-6-6-6"/>
            </svg>
          `;
          nextBtn.style.cssText = `
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 44px;
            height: 44px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e6e6e6;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(8px);
            transition: all 0.2s ease;
            pointer-events: auto;
            font-family: inherit;
          `;

          // Create counter
          counter = document.createElement('div');
          counter.id = 'fullscreen-counter';
          counter.style.cssText = `
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e6e6e6;
            padding: 8px 16px;
            font-size: 14px;
            backdrop-filter: blur(8px);
            pointer-events: auto;
            font-family: inherit;
          `;
          updateCounter();
        }

        // Add hover effects for all buttons
        function addHoverEffects(btn) {
          btn.addEventListener('mouseenter', function() {
            this.style.background = 'rgba(0, 0, 0, 0.95)';
            this.style.borderColor = 'rgba(255, 255, 255, 0.4)';
            this.style.transform = this.style.transform.replace('scale(1)', 'scale(1.05)');
            if (!this.style.transform.includes('scale')) {
              this.style.transform += ' scale(1.05)';
            }
            this.style.color = '#ffffff';
          });
          
          btn.addEventListener('mouseleave', function() {
            this.style.background = 'rgba(0, 0, 0, 0.8)';
            this.style.borderColor = 'rgba(255, 255, 255, 0.2)';
            this.style.transform = this.style.transform.replace('scale(1.05)', 'scale(1)');
            this.style.color = '#e6e6e6';
          });
        }

        addHoverEffects(minimizeBtn);
        if (prevBtn) addHoverEffects(prevBtn);
        if (nextBtn) addHoverEffects(nextBtn);

        // Event handlers
        minimizeBtn.onclick = function(e) {
          e.preventDefault();
          e.stopPropagation();
          exitFullscreen();
        };

        if (prevBtn) {
          prevBtn.onclick = function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Previous button clicked');
            navigateFullscreen(-1);
          };
        }

        if (nextBtn) {
          nextBtn.onclick = function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Next button clicked');
            navigateFullscreen(1);
          };
        }

        function updateCounter() {
          if (counter) {
            counter.textContent = `${currentImageIndex + 1} / ${carouselImages.length}`;
          }
        }

        function navigateFullscreen(direction) {
          if (carouselImages.length <= 1) return;
          
          // Handle direction properly - don't add when direction is 0 (for Home/End)
          if (direction !== 0) {
            currentImageIndex += direction;
          }
          
          if (currentImageIndex < 0) currentImageIndex = carouselImages.length - 1;
          if (currentImageIndex >= carouselImages.length) currentImageIndex = 0;
          
          const img = frame.querySelector('img');
          img.src = carouselImages[currentImageIndex];
          updateCounter();
          
          // Update the main carousel if it exists (but don't trigger events that might cause issues)
          const carouselContainer = frame.closest('.carousel-container');
          if (carouselContainer) {
            // Update thumbnail active state
            const thumbnails = carouselContainer.querySelectorAll('.carousel-thumbnail');
            thumbnails.forEach((thumb, index) => {
              thumb.classList.toggle('active', index === currentImageIndex);
            });
            
            // Update main carousel image only if it's different
            const mainImg = carouselContainer.querySelector('.carousel-image');
            if (mainImg && mainImg !== img && mainImg.src !== carouselImages[currentImageIndex]) {
              mainImg.src = carouselImages[currentImageIndex];
            }
            
            // Update carousel counter if it exists
            const carouselCounter = carouselContainer.querySelector('.carousel-counter');
            if (carouselCounter) {
              carouselCounter.textContent = `${currentImageIndex + 1} / ${carouselImages.length}`;
            }
          }
        }

        // Handle keyboard navigation
        function handleFullscreenKeydown(e) {
          if (!frame.classList.contains('is-fullscreen')) return;
          
          switch(e.key) {
            case 'ArrowLeft':
              e.preventDefault();
              navigateFullscreen(-1);
              break;
            case 'ArrowRight':
              e.preventDefault();
              navigateFullscreen(1);
              break;
            case 'Escape':
              e.preventDefault();
              exitFullscreen();
              break;
            case 'Home':
              e.preventDefault();
              if (carouselImages.length > 1) {
                currentImageIndex = 0;
                navigateFullscreen(0);
              }
              break;
            case 'End':
              e.preventDefault();
              if (carouselImages.length > 1) {
                currentImageIndex = carouselImages.length - 1;
                navigateFullscreen(0);
              }
              break;
          }
        }

        document.addEventListener('keydown', handleFullscreenKeydown);
        frame.dataset.keydownHandler = 'true';
        
        // Append controls to container
        controlsContainer.appendChild(minimizeBtn);
        if (prevBtn) controlsContainer.appendChild(prevBtn);
        if (nextBtn) controlsContainer.appendChild(nextBtn);
        if (counter) controlsContainer.appendChild(counter);
        
        frame.appendChild(controlsContainer);
        
        // Try to request fullscreen
        if (frame.requestFullscreen) {
          frame.requestFullscreen().catch(err => {
            console.log('Fullscreen failed:', err);
            // Fallback: just keep the is-fullscreen class for styling
          });
        } else if (frame.webkitRequestFullscreen) {
          frame.webkitRequestFullscreen();
        } else if (frame.msRequestFullscreen) {
          frame.msRequestFullscreen();
        }
      }



      function exitFullscreen(){
        // Remove any existing fullscreen controls
        document.querySelectorAll('#fullscreen-controls').forEach(controls => controls.remove());
        document.querySelectorAll('#simple-minimize-btn').forEach(btn => btn.remove());
        
        // Remove keyboard event listeners
        const frames = document.querySelectorAll('.img-frame[data-keydown-handler]');
        frames.forEach(frame => {
          delete frame.dataset.keydownHandler;
        });
        
        // Reset carousel state
        currentCarousel = null;
        currentImageIndex = 0;
        carouselImages = [];
        
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
          document.msExitFullscreen();
        } else {
          // Manual fallback - remove fullscreen styling
          const fs = document.querySelector('.img-frame.is-fullscreen');
          if (fs) {
            const img = fs.querySelector('img');
            if (img.dataset._thumb) {
              img.src = img.dataset._thumb;
              delete img.dataset._thumb;
            }
            fs.classList.remove('is-fullscreen');
            document.body.classList.remove('no-scroll');
          }
        }
      }

      // Initialize frame handlers after page loads
      function initFrameHandlers() {
        document.querySelectorAll('.img-frame').forEach(frame => {
          const btn = frame.querySelector('.expand-btn');
          if (btn && !btn.dataset.initialized) {
            btn.dataset.initialized = 'true';
            btn.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              toFullscreen(frame);
            });

            // Click background to exit when fullscreen
            frame.addEventListener('click', function(e) {
              if (!document.fullscreenElement) return;
              // do not exit when clicking the img or any buttons
              if (e.target.tagName.toLowerCase() === 'img') return;
              if (e.target.tagName.toLowerCase() === 'button') return;
              if (e.target.tagName.toLowerCase() === 'svg') return;
              if (e.target.tagName.toLowerCase() === 'path') return;
              if (e.target.closest('button')) return;
              if (e.target.closest('.expand-btn')) return;
              if (e.target.closest('#fullscreen-controls')) return;
              console.log('Frame clicked, exiting fullscreen');
              exitFullscreen();
            });
          }
        });
      }

      // Initialize on DOM ready and when new content is added
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initFrameHandlers);
      } else {
        initFrameHandlers();
      }

      // Re-initialize when new content is dynamically added (like overlays)
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.addedNodes.length > 0) {
            // Check if any added nodes contain img-frame elements
            mutation.addedNodes.forEach(function(node) {
              if (node.nodeType === 1) { // Element node
                if (node.classList && node.classList.contains('img-frame')) {
                  initFrameHandlers();
                } else if (node.querySelector && node.querySelector('.img-frame')) {
                  initFrameHandlers();
                }
              }
            });
          }
        });
      });
      observer.observe(document.body, { childList: true, subtree: true });

      // Handle cleanup when user presses Esc or otherwise exits
      document.addEventListener('fullscreenchange', ()=>{
        const fs = document.querySelector('.img-frame.is-fullscreen');
        if (!document.fullscreenElement && fs){
          const img = fs.querySelector('img');
          // restore thumb if we swapped it
          if (img.dataset._thumb){
            img.src = img.dataset._thumb;
            delete img.dataset._thumb;
          }
          fs.classList.remove('is-fullscreen');
          document.body.classList.remove('no-scroll');
          // Clean up all fullscreen controls
          document.querySelectorAll('#fullscreen-controls').forEach(controls => controls.remove());
          document.querySelectorAll('#simple-minimize-btn').forEach(btn => btn.remove());
          
          // Reset carousel state
          currentCarousel = null;
          currentImageIndex = 0;
          carouselImages = [];
        }
      });

      // Handle webkit fullscreen change
      document.addEventListener('webkitfullscreenchange', ()=>{
        const fs = document.querySelector('.img-frame.is-fullscreen');
        if (!document.webkitFullscreenElement && fs){
          const img = fs.querySelector('img');
          if (img.dataset._thumb){
            img.src = img.dataset._thumb;
            delete img.dataset._thumb;
          }
          fs.classList.remove('is-fullscreen');
          document.body.classList.remove('no-scroll');
          // Clean up all fullscreen controls
          document.querySelectorAll('#fullscreen-controls').forEach(controls => controls.remove());
          document.querySelectorAll('#simple-minimize-btn').forEach(btn => btn.remove());
          
          // Reset carousel state
          currentCarousel = null;
          currentImageIndex = 0;
          carouselImages = [];
        }
      });

      // Add ESC key handler as backup
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          const fs = document.querySelector('.img-frame.is-fullscreen');
          if (fs) {
            exitFullscreen();
          }
        }
      });
    })();
  </script>
</body>
</html>
